"use strict";angular.module("angular-harmonized",[]).provider("harmonized",function(){var provider=this;this.setConfig=function(config){harmonized.setConfig(config)},this.setModelSchema=function(schema){harmonized.setModelSchema(schema)},this.$get=function($rootScope,$http,$q,$timeout){var service={setConfig:provider.setConfig,getErrorStream:function(){return harmonized.errorStream},build:function(httpOptionsTransform){var httpFn=function(httpOptions){var deferred=$q.defer();return _.isFunction(httpOptionsTransform)&&(httpOptions=httpOptionsTransform(httpOptions)),$http(httpOptions).success(function(data,status,header){deferred.resolve({data:data,status:status,header:header})}).error(function(data,status,header){var error=new Error("HTTP error");error.target={data:data,status:status,header:header},deferred.reject(error)}),deferred.promise},viewUpdateFn=function(callback){$rootScope.$evalAsync(callback)};harmonized.setup(httpFn,viewUpdateFn),harmonized.setPromiseClass($q),harmonized.build()},destroy:harmonized.destroy,pushAll:harmonized.pushAll,setOnline:harmonized.setOnline,setOffline:harmonized.setOffline,createViewModel:harmonized.createViewModel};return service}});